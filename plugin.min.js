//    __  _______________   _____                       __________                __
//   /  |/  / ____/ ____/  / ___/____  __  ______  ____/ / ____/ /___  __  ______/ /
//  / /|_/ / /   / __/     \__ \/ __ \/ / / / __ \/ __  / /   / / __ \/ / / / __  /
// / /  / / /___/ /___    ___/ / /_/ / /_/ / / / / /_/ / /___/ / /_/ / /_/ / /_/ /
///_/  /_/\____/_____/   /____/\____/\__,_/_/ /_/\__,_/\____/_/\____/\__,_/\__,_/
//
// A TinyMCE plugin for embeding Soundcloud files - this is heavily influenced/based
// on the tinymce-youtube plugin by Jimmy Hills: https://github.com/hatchddigital/tinymce-youtube
// UDOX 2013 | jaymz campbell | u-dox.com

tinymce.PluginManager.add('soundcloud', function (editor, url) {

    function openmanager() {
        editor.windowManager.open({
            file: url + '/dialog.html?r=' + Math.random(),
            width: 500 + parseInt(editor.getLang('soundcloud.delta_width', 0), 10),
            height: 300 + parseInt(editor.getLang('soundcloud.delta_height', 0), 10),
            inline: 1
        }, {
            plugin_url: url, // Plugin absolute URL
            some_custom_arg: 'custom arg' // Custom argument
        });


    }
    editor.addButton('soundcloud', {
        icon: true,
        image: tinyMCE.baseURL + '/plugins/soundcloud/img/soundcloud-icon.png',
        tooltip: 'Add Soundcloud track',
        onclick: openmanager
    });

    editor.addMenuItem('soundcloud', {
        icon: 'media',
        text: 'Add soundcloud track',
        onclick: openmanager,
        context: 'insert'
    });
});
